[tox]
envlist = py312, lint, typecheck, format-check, all
isolated_build = true
skip_missing_interpreters = true

[testenv]
deps = 
    pytest>=8.4.1
    pytest-cov>=6.2.1
    mcp[cli]>=1.12.2
commands = pytest --cov=. --cov-report=term-missing {posargs}
# Allow network access for package installation
passenv = 
    PYTHONPATH
    HOME
    USER

[testenv:lint]
deps = ruff>=0.12.5
commands = ruff check {posargs:.}
passenv = 
    PYTHONPATH
    HOME
    USER

[testenv:format]
deps = ruff>=0.12.5
commands = ruff format {posargs:.}
passenv = 
    PYTHONPATH
    HOME
    USER

[testenv:format-check]
deps = ruff>=0.12.5
commands = ruff format --check {posargs:.}
passenv = 
    PYTHONPATH
    HOME
    USER

[testenv:typecheck]
deps = 
    mypy>=1.8.0
    mcp[cli]>=1.12.2
commands = mypy {posargs:.}
passenv = 
    PYTHONPATH
    HOME
    USER

[testenv:all]
deps =
    pytest>=8.4.1
    pytest-cov>=6.2.1
    ruff>=0.12.5
    mypy>=1.8.0
    mcp[cli]>=1.12.2
commands =
    ruff check .
    ruff format --check .
    mypy .
    pytest --cov=. --cov-report=term-missing
passenv = 
    PYTHONPATH
    HOME
    USER

# Multi-Python version testing environments
[testenv:py311]
basepython = python3.11

[testenv:py313]
basepython = python3.13