[tox]
envlist = test, lint, typecheck, format-check
skip_missing_interpreters = true

[testenv]
system_site_packages = true
skip_install = true

[testenv:test]
commands = pytest --cov=. --cov-report=term-missing {posargs}

[testenv:lint]
commands = ruff check {posargs:.}

[testenv:format]
commands = ruff format {posargs:.}

[testenv:format-check]
commands = ruff format --check {posargs:.}

[testenv:typecheck]
commands = mypy {posargs:.}

[testenv:all]
commands =
    ruff check .
    ruff format --check .
    mypy .
    pytest --cov=. --cov-report=term-missing

# Python version-specific testing environments
[testenv:py313]
basepython = python3.13
commands = pytest --cov=. --cov-report=term-missing {posargs}